# Depends:
#  pkg-config, gcc-libs (libgcc & libstdc++)
# Optional depends:
#  libtool, qt5, libiconv, zlib, liblzma (xz), expat, libpng, libjpeg (libjpeg-turbo), libtiff,
#  libjbig, libxpm, libmspack, SDL2, cairo, libsecret, webkit, xtst, libnotify, gnomevfs,
#  gtkprint, gst, mesagl, glu, gl, sm, directfb, pangoxft, pangoft2, Xinerama, Xxf86vm, xmkmf
#
# Notes:
#  - libtool required for autoreconf command
# TODO:
#  - disable everything not used by MyABCs

# FIXME: DLLs are being installed to lib dir

depends=(expat cairo-reb)

ver="3.1.2"
ver_base="${ver%.*}"
dname="${name}-${ver}"
fname="${dname}.tar.bz2"
src="https://github.com/wxWidgets/wxWidgets/releases/download/v${ver}/${fname}"

config_opts=(
	--disable-gtktest
	--disable-sdltest
	--with-libpng=sys
	--with-libjpeg=builtin
	--with-libtiff=builtin
	--with-libxpm=builtin
	--with-libiconv=builtin
	--with-regex=builtin
	--with-zlib=sys
	--with-liblzma=builtin
	--with-expat=sys
)

if ${os_win}; then
	config_opts+=(--with-msw)
	libtype_opts=(
		--enable-shared=yes
		--enable-monolithic
	)
else
	# getting linker errors on Linux/Gtk: undefined reference to `vtable for wxMDIClientWindow'
	config_opts+=(--disable-mdi)
	libtype_opts=(--enable-shared=no)
fi

#post_extract() {
#	autoreconf -fiv
#}

if ${os_win}; then
	post_install() {
		mv -v "${install_prefix}/bin/wxrc-${ver_base}" "${install_prefix}/bin/wxrc-${ver_base}.exe"
	}
fi
