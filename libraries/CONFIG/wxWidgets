# Depends:
#  pkg-config
# Optional depends:
#  libtool, qt5, libiconv, zlib, liblzma (xz), expat, libpng, libjpeg (libjpeg-turbo), libtiff,
#  libjbig, libxpm, libmspack, SDL2, cairo, libsecret, webkit, xtst, libnotify, gnomevfs,
#  gtkprint, gst, mesagl, glu, gl, sm, directfb, pangoxft, pangoft2, Xinerama, Xxf86vm, xmkmf
#
# Notes:
#  - libtool required for autoreconf command
# TODO:
#  - disable everything not used by MyABCs

# FIXME: DLLs are being installed to lib dir

DEPENDS=(cairo-reb)

VER="3.1.2"
VER_BASE="${VER%.*}"
DNAME="${NAME}-${VER}"
FNAME="${DNAME}.tar.bz2"
SOURCE="https://github.com/wxWidgets/wxWidgets/releases/download/v${VER}/${FNAME}"

CONFIG_OPTS=(
	--disable-gtktest
	--disable-sdltest
	--with-libpng=sys
	--with-libjpeg=builtin
	--with-libtiff=builtin
	--with-libxpm=builtin
	--with-libiconv=builtin
	--with-regex=builtin
	--with-zlib=sys
	--with-liblzma=builtin
	--with-expat=builtin
)

if ${OS_WIN}; then
	CONFIG_OPTS+=(--with-msw)
	LIBTYPE_OPTS=(
		--enable-shared=yes
		--enable-monolithic
	)
else
	# getting linker errors on Linux/Gtk: undefined reference to `vtable for wxMDIClientWindow'
	CONFIG_OPTS+=(--disable-mdi)
	LIBTYPE_OPTS=(--enable-shared=no)
fi

#post_extract() {
#	autoreconf -fiv
#}

if ${OS_WIN}; then
	post_install() {
		mv -v "${INSTALL_PREFIX}/bin/wxrc-${VER_BASE}" "${INSTALL_PREFIX}/bin/wxrc-${VER_BASE}.exe"
	}
fi
